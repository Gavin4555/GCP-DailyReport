# **GCP每日一报自动填报**



## 免责声明：

### 该项目仅供学习交流使用，禁止用于其他用途！请各位每天按实际情况及时填写或更新“每日一报”！



### 写在开头：

该文档是我第一次使用markdown语言编写，有许多格式等纰漏，还望诸位包涵。

同时，对你造成的不便之处在此致歉。



### 文件说明：

”歪比巴卜.txt“是填写推送token的例子
“DailyReport.py”在本地使用
“DailyReport_cloud.py”在腾讯云函数使用



### 已实现：

- 使用抓取的原生数据自动填报
  - 支持使用多用户配置文件自动填报
- 支持推送填报成功与否的状态消息
  - 使用“pushplus”公众号进行推送，使用方法见后文“ ‘腾讯云函数’的使用 “
- 可配合”腾讯云函数“实现自动定时填报
  - 使用方法在后文“推送服务的使用”



### 程序使用方法：

##### ①在小程序填写好信息后，使用抓包软件抓取小程序向服务器发送的文本内容，保存为txt文件：

> ![88b7ddfdc794d76a6f84f4f26f9a16d](.\88b7ddfdc794d76a6f84f4f26f9a16d.png)

> 关于抓包软件，PC可使用如”fiddle“、”Wireshark“等，IOS可使用如”Stream“等，安卓可使用如”HttpCanary“等（由于微信的特殊性，当微信版本7.0以上+安卓版本7.0以上，微信仅使用其内置的证书，因此正常情况下我们无法抓取其Https的数据包。不过也有曲线解决的办法，比如再安装如”平行空间“这类软件与抓包软件配合使用。HttpCanary部分版本也内置了安装”平行空间“的按钮，但颇为麻烦，因此建议使用PC端处理）



##### ②把txt文件放置与程序同一目录下



##### ③修改代码：

> ​		![bad76195ddcbcb399f8842ff3e49242](.\bad76195ddcbcb399f8842ff3e49242.png)

把“歪比巴卜”修改为txt文件的名字。后面的“1”

> 此处为推送服务的开关，当为“1”时为开启状态，若不使用可填入“0”。推送服务的使用方法在后文



### “腾讯云函数”的使用：

请在[腾讯云官网](https://cloud.tencent.com/)注册，注册完毕后请如下图找到“云函数”服务并新建函数：

> ![13a0f5ba66e95b11acb40208a98287d](.\13a0f5ba66e95b11acb40208a98287d.png)
>
> ![4c97ce58c7fa06f4823c80505b7891b](.\4c97ce58c7fa06f4823c80505b7891b.png)
>
> 新建函数：
>
> ![48f9f36436a80550461c44a0c88777b](.\48f9f36436a80550461c44a0c88777b.png)
>
> ![52dc938eeeb01549775f347d0c0e1e1](.\52dc938eeeb01549775f347d0c0e1e1.png)



##### 下面这张图有一个错误：应该选择“本地上传文件夹”！

> 因为即使下载的是我发的zip压缩包，也得重新解压并修改才能使用。因图片编辑的内容较多，已不便修改。特此说明



> ![4513ff6d1bb818d78044e04ab55b09d](.\4513ff6d1bb818d78044e04ab55b09d.png)

##### “本地上传文件夹”选择.py文件和.txt用户文件所在的文件夹即可



最后，点击最下面的“完成”，函数新建完毕。

接下来参照上文“使用方法”修改配置后，先点击“部署”，再点击“测试”，通过日志查看程序是否成功运行



### 推送服务的使用：

> 本来打算使用我已用多年的“Sever酱”实现，后来发现经常推送失败并报错。之前我一直用它推送家中路由器设备上线通知，难怪每个月总有那么几天没有收到消息，还以为是路由器的问题



请在微信搜索并关注公众号“pushplus”，按相关提示操作后会发送给你所使用的“token”。

在完成上文“使用方法”中保存txt文件后，打开文件，直接在文本末尾添加“&token=你使用的token”（不包括双引号）

##### 注意：是在“文本末尾”添加，而非在第二行或另起一行添加！